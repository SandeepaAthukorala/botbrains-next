(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12883,e=>{"use strict";let r=(0,e.i(46443).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>r],12883)},81060,e=>{"use strict";var r=e.i(7960);e.i(4374);var t=e.i(41559);let s="keywords";async function o(e,o){let a=`kw-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:a,name:e,workspaceId:o,created_at:new Date().toISOString()};return await (0,t.setDoc)((0,t.doc)(r.db,s,a),d),d}async function a(e){let o;o=e?(0,t.query)((0,t.collection)(r.db,s),(0,t.where)("workspaceId","==",e),(0,t.orderBy)("name")):(0,t.query)((0,t.collection)(r.db,s),(0,t.orderBy)("name"));try{return(await (0,t.getDocs)(o)).docs.map(e=>e.data())}catch(o){if("failed-precondition"===o.code){let o=e?(0,t.query)((0,t.collection)(r.db,s),(0,t.where)("workspaceId","==",e)):(0,t.collection)(r.db,s);return(await (0,t.getDocs)(o)).docs.map(e=>e.data()).sort((e,r)=>e.name.localeCompare(r.name))}throw o}}async function d(e){let o=(0,t.doc)(r.db,s,e),a=await (0,t.getDoc)(o);if(a.exists())return a.data()}async function n(e){await (0,t.deleteDoc)((0,t.doc)(r.db,s,e))}async function l(e,s){let o=(0,t.query)((0,t.collection)(r.db,"prompts"));s&&(o=(0,t.query)(o,(0,t.where)("workspaceId","==",s)));let a=(0,t.query)(o,(0,t.where)("keywords","array-contains",e));return(await (0,t.getDocs)(a)).size}async function c(e,o){let a=(0,t.query)((0,t.collection)(r.db,s),(0,t.where)("name","==",e));o&&(a=(0,t.query)(a,(0,t.where)("workspaceId","==",o)));let d=await (0,t.getDocs)(a);if(!d.empty)return d.docs[0].data()}async function i(e){return(await a(e)).map(e=>e.name)}e.s(["createKeyword",()=>o,"deleteKeyword",()=>n,"getAllKeywords",()=>a,"getAllUsedKeywords",()=>i,"getKeyword",()=>d,"getKeywordByName",()=>c,"getKeywordUsageCount",()=>l])},12430,e=>{"use strict";var r=e.i(5064);function t({label:e,error:t,className:s="",...o}){return(0,r.jsxs)("div",{className:"w-full",children:[e&&(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2 transition-colors",children:e}),(0,r.jsx)("input",{className:`
                    w-full px-4 py-2.5
                    bg-background/50
                    border border-input
                    rounded-md
                    text-sm
                    text-foreground
                    placeholder:text-muted-foreground
                    focus:outline-none 
                    focus:ring-2 
                    focus:ring-primary/50 
                    focus:border-primary
                    focus:bg-background/80
                    disabled:cursor-not-allowed disabled:opacity-50
                    transition-all duration-300 ease-out
                    hover:border-input/80
                    shadow-sm focus:shadow-md
                    ${t?"border-destructive focus:ring-destructive/50 focus:border-destructive":""}
                    ${s}
                `,...o}),t&&(0,r.jsx)("p",{className:"mt-2 text-xs text-destructive animate-slide-up",children:t})]})}e.s(["Input",()=>t])},3571,e=>{"use strict";let r=(0,e.i(46443).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>r],3571)},40658,e=>{"use strict";var r=e.i(5064);function t({className:e=""}){return(0,r.jsx)("div",{className:`
                animate-pulse rounded-md bg-muted/60
                relative overflow-hidden
                before:absolute before:inset-0
                before:-translate-x-full
                before:animate-[shimmer_2s_infinite]
                before:bg-gradient-to-r
                before:from-transparent before:via-white/10 before:to-transparent
                ${e}
            `})}e.s(["Skeleton",()=>t])},53322,e=>{"use strict";var r=e.i(5064),t=e.i(12883),s=e.i(12413),o=e.i(84763);function a({value:e,onChange:a,placeholder:d="Search prompts..."}){let[n,l]=(0,o.useState)(e);return(0,o.useEffect)(()=>{l(e)},[e]),(0,o.useEffect)(()=>{let e=setTimeout(()=>{a(n)},300);return()=>clearTimeout(e)},[n,a]),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:d,className:"   w-full pl-9 pr-9 py-2   rounded-md text-sm   bg-background border border-input   focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary   transition-all   placeholder:text-muted-foreground   text-foreground   "}),n&&(0,r.jsx)("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:(0,r.jsx)(s.X,{className:"w-3.5 h-3.5"})})]})}e.s(["SearchBar",()=>a])},40958,e=>{"use strict";var r=e.i(5064),t=e.i(84763),s=e.i(45770),o=e.i(3571),a=e.i(20953),d=e.i(81060);let n=(0,a.create)(e=>({keywords:[],usedKeywords:[],isLoading:!1,loadKeywords:async()=>{e({isLoading:!0});try{let r=await (0,d.getAllKeywords)();e({keywords:r,isLoading:!1})}catch(r){console.error("Failed to load keywords:",r),e({isLoading:!1})}},loadUsedKeywords:async()=>{try{let r=await (0,d.getAllUsedKeywords)();e({usedKeywords:r})}catch(e){console.error("Failed to load used keywords:",e)}},createKeyword:async r=>{let t=await (0,d.createKeyword)(r);return e(e=>({keywords:[...e.keywords,t]})),t},deleteKeyword:async r=>{await (0,d.deleteKeyword)(r),e(e=>({keywords:e.keywords.filter(e=>e.id!==r)}))},getKeywordUsageCount:async e=>(0,d.getKeywordUsageCount)(e)}));var l=e.i(48143),c=e.i(79511),i=e.i(12430),u=e.i(40658),m=e.i(53322);function y(){let e=n(e=>e.keywords),a=n(e=>e.loadKeywords),d=n(e=>e.createKeyword),y=n(e=>e.deleteKeyword),h=n(e=>e.getKeywordUsageCount),x=(0,l.useToast)(),[w,f]=(0,t.useState)(""),[p,g]=(0,t.useState)(""),[b,v]=(0,t.useState)({}),[j,k]=(0,t.useState)(!1),[N,K]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{await a(),K(!1)})()},[a]),(0,t.useEffect)(()=>{let r=async()=>{let r={};for(let t of e)r[t.name]=await h(t.name);v(r)};e.length>0&&r()},[e,h]);let S=async()=>{let r=w.trim();if(!r)return void x.error("Keyword name cannot be empty");if(e.some(e=>e.name.toLowerCase()===r.toLowerCase()))return void x.error("Keyword already exists");k(!0);try{await d(r),f(""),x.success("Keyword added")}catch(e){x.error("Failed to add keyword"),console.error(e)}finally{k(!1)}},C=async e=>{let r=b[e.name]||0;if(!(r>0)||confirm(`"${e.name}" is used in ${r} prompt(s). Delete anyway? It will be removed from those prompts.`))try{await y(e.id),x.success("Keyword deleted")}catch(e){x.error("Failed to delete keyword"),console.error(e)}},D=e.filter(e=>e.name.toLowerCase().includes(p.toLowerCase()));return N?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 px-8 py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Skeleton,{className:"h-8 w-48 mb-2"}),(0,r.jsx)(u.Skeleton,{className:"h-4 w-64"})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[(0,r.jsx)(u.Skeleton,{className:"h-4 w-24 mb-2"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.Skeleton,{className:"h-10 flex-1 rounded-md"}),(0,r.jsx)(u.Skeleton,{className:"h-10 w-20 rounded-md"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>(0,r.jsx)("div",{className:"bg-card border border-border rounded-lg p-3 flex justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Skeleton,{className:"h-6 w-24 rounded-md"}),(0,r.jsx)(u.Skeleton,{className:"h-4 w-32"})]})},t))})]}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 px-8 py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:"Keywords"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Manage keywords for better prompt organization and discovery"})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Add Keyword"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.Input,{value:w,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&S()},placeholder:"e.g., SEO, Marketing, Tutorial",className:"flex-1"}),(0,r.jsxs)(c.Button,{onClick:S,isLoading:j,children:[(0,r.jsx)(s.Plus,{className:"w-4 h-4"}),"Add"]})]})]}),e.length>0&&(0,r.jsx)(m.SearchBar,{value:p,onChange:g,placeholder:"Search keywords..."}),0===e.length?(0,r.jsxs)("div",{className:"bg-card/50 border border-border border-dashed rounded-lg p-16 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-6 opacity-50",children:"ðŸ·ï¸"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No keywords yet"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"Add your first keyword to improve prompt searchability"})]}):0===D.length?(0,r.jsx)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No keywords match your search"})}):(0,r.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,r.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 transition-all hover:border-primary/40 group flex items-center justify-between shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 bg-secondary text-secondary-foreground rounded-md text-sm font-medium",children:e.name}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Used in ",b[e.name]||0," prompt(s)"]})]}),(0,r.jsx)("button",{onClick:()=>C(e),className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded text-muted-foreground hover:text-destructive transition-all",title:"Delete",children:(0,r.jsx)(o.Trash2,{className:"w-4 h-4"})})]},e.id))}),e.length>0&&(0,r.jsxs)("div",{className:"text-center text-xs text-muted-foreground",children:[D.length," of ",e.length," keyword(s)"]})]})}function h(){return(0,r.jsx)(y,{})}e.s(["default",()=>h],40958)}]);