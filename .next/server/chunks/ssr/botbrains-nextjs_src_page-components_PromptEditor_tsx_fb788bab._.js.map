{"version":3,"sources":["../../../../../botbrains-nextjs/src/page-components/PromptEditor.tsx","../../../../../botbrains-nextjs/src/components/ui/ChipInput.tsx","../../../../../botbrains-nextjs/src/components/editor/ParentPromptSelector.tsx","../../../../../botbrains-nextjs/node_modules/lucide-react/src/icons/arrow-left.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { Save, ArrowLeft } from 'lucide-react';\r\nimport type { Prompt, PromptType, Variable } from '@/types';\r\nimport { usePromptStore } from '@/store/usePromptStore';\r\nimport { getPrompt } from '@/lib/storage';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { Textarea } from '@/components/ui/Textarea';\r\nimport { Select } from '@/components/ui/Select';\r\nimport { ChipInput } from '@/components/ui/ChipInput';\r\nimport { ParentPromptSelector } from '@/components/editor/ParentPromptSelector';\r\nimport { extractVariables } from '@/utils/templateResolver';\r\nimport { useToast } from '@/hooks/useToast';\r\n\r\nconst PROMPT_TYPES: { value: PromptType; label: string }[] = [\r\n    { value: 'LLM', label: 'LLM' },\r\n    { value: 'Image', label: 'Image' },\r\n    { value: 'Video', label: 'Video' },\r\n    { value: 'Automation', label: 'Automation' },\r\n    { value: 'Other', label: 'Other' },\r\n];\r\n\r\nexport function PromptEditor() {\r\n    const { id } = useParams<{ id: string }>();\r\n    const router = useRouter();\r\n    const toast = useToast();\r\n    const createPrompt = usePromptStore((state) => state.createPrompt);\r\n    const updatePrompt = usePromptStore((state) => state.updatePrompt);\r\n    const currentWorkspaceId = usePromptStore((state) => state.currentWorkspaceId);\r\n\r\n    const isNewPrompt = !id || id === 'new';\r\n\r\n    const [formData, setFormData] = useState<Partial<Prompt>>({\r\n        title: '',\r\n        type: 'LLM',\r\n        prompt_template: '',\r\n        variables: [],\r\n        category: '',\r\n        tags: [],\r\n        keywords: [],\r\n        color_tag: '#00C2FF',\r\n        version: 1,\r\n        performance: { rating: 0, notes: '' },\r\n        examples: [],\r\n    });\r\n\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Load existing prompt OR initial data from sessionStorage\r\n    useEffect(() => {\r\n        const storedData = sessionStorage.getItem('promptInitialData');\r\n\r\n        if (storedData) {\r\n            try {\r\n                const initialData = JSON.parse(storedData) as Partial<Prompt>;\r\n                setFormData({\r\n                    ...formData,\r\n                    ...initialData,\r\n                });\r\n                // Clear the stored data\r\n                sessionStorage.removeItem('promptInitialData');\r\n            } catch (error) {\r\n                console.error('Failed to parse initial data:', error);\r\n            }\r\n        } else if (!isNewPrompt && id) {\r\n            // Load existing prompt\r\n            getPrompt(id).then((prompt) => {\r\n                if (prompt) {\r\n                    setFormData({\r\n                        ...prompt,\r\n                        keywords: prompt.keywords || [],\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }, [id, isNewPrompt]);\r\n\r\n    // Auto-detect variables from template\r\n    useEffect(() => {\r\n        if (formData.prompt_template) {\r\n            const detected = extractVariables(formData.prompt_template);\r\n            const existingVars = formData.variables || [];\r\n\r\n            // Merge: keep existing config, add new ones\r\n            const mergedVars: Variable[] = detected.map((varName) => {\r\n                const existing = existingVars.find((v) => v.name === varName);\r\n                return existing || { name: varName, type: 'text' };\r\n            });\r\n\r\n            setFormData((prev) => ({ ...prev, variables: mergedVars }));\r\n        }\r\n    }, [formData.prompt_template]);\r\n\r\n    const handleSave = async () => {\r\n        console.log('üíæ handleSave called');\r\n\r\n        if (!formData.title?.trim()) {\r\n            toast.error('Title is required');\r\n            return;\r\n        }\r\n\r\n        if (!formData.prompt_template?.trim()) {\r\n            toast.error('Prompt template is required');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n\r\n        try {\r\n            const data: Omit<Prompt, 'id' | 'created_at' | 'updated_at' | 'order'> = {\r\n                title: formData.title!,\r\n                type: formData.type || 'LLM',\r\n                prompt_template: formData.prompt_template!,\r\n                variables: formData.variables || [],\r\n                category: formData.category || '',\r\n                tags: formData.tags || [],\r\n                keywords: formData.keywords || [],\r\n                color_tag: formData.color_tag || '#00C2FF',\r\n                version: formData.version || 1,\r\n                performance: formData.performance || { rating: 0, notes: '' },\r\n                examples: formData.examples || [],\r\n                parentId: formData.parentId || null,\r\n                compositionMode: formData.compositionMode || 'inherit',\r\n            };\r\n\r\n            if (isNewPrompt) {\r\n                await createPrompt(data);\r\n                toast.success('Prompt created');\r\n            } else if (id) {\r\n                await updatePrompt(id, data);\r\n                toast.success('Prompt updated');\r\n            }\r\n\r\n            router.push('/');\r\n        } catch (error) {\r\n            console.error('‚ùå Save failed with error:', error);\r\n            toast.error('Failed to save');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const updateVariable = (index: number, updates: Partial<Variable>) => {\r\n        const newVars = [...(formData.variables || [])];\r\n        newVars[index] = { ...newVars[index], ...updates };\r\n        setFormData((prev) => ({ ...prev, variables: newVars }));\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto space-y-6 px-8 py-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-4\">\r\n                <Button variant=\"ghost\" onClick={() => router.back()} className=\"px-2\">\r\n                    <ArrowLeft className=\"w-5 h-5\" />\r\n                </Button>\r\n                <h1 className=\"text-2xl font-bold text-foreground\">\r\n                    {isNewPrompt ? 'New Prompt' : 'Edit Prompt'}\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Form */}\r\n            <div className=\"bg-card border border-border rounded-lg p-6 space-y-6 shadow-sm\">\r\n                {/* Title & Type */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"md:col-span-2\">\r\n                        <Input\r\n                            label=\"Title *\"\r\n                            value={formData.title}\r\n                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                            placeholder=\"e.g., Blog Post Generator\"\r\n                        />\r\n                    </div>\r\n                    <Select\r\n                        label=\"Type *\"\r\n                        value={formData.type}\r\n                        onChange={(e) => setFormData({ ...formData, type: e.target.value as PromptType })}\r\n                        options={PROMPT_TYPES}\r\n                    />\r\n                </div>\r\n\r\n                {/* Parent Prompt Selector */}\r\n                {currentWorkspaceId && (\r\n                    <div className=\"border-t border-border pt-6\">\r\n                        <ParentPromptSelector\r\n                            currentPromptId={id === 'new' ? null : id || null}\r\n                            selectedParentId={formData.parentId || null}\r\n                            workspaceId={currentWorkspaceId}\r\n                            onSelect={(parentId) => setFormData(prev => ({ ...prev, parentId }))}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Template */}\r\n                <Textarea\r\n                    label=\"Prompt Template *\"\r\n                    value={formData.prompt_template}\r\n                    onChange={(e) => setFormData({ ...formData, prompt_template: e.target.value })}\r\n                    placeholder=\"Write your prompt here. Use {{variableName}} for dynamic content.\"\r\n                    rows={10}\r\n                    mono\r\n                />\r\n\r\n                {/* Variables */}\r\n                {formData.variables && formData.variables.length > 0 && (\r\n                    <div className=\"border-t border-border pt-6\">\r\n                        <h3 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-4\">\r\n                            Detected Variables ({formData.variables.length})\r\n                        </h3>\r\n                        <div className=\"space-y-4\">\r\n                            {formData.variables.map((variable, index) => (\r\n                                <div key={variable.name} className=\"bg-secondary/30 p-4 rounded-md border border-border space-y-4\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        <Input\r\n                                            label=\"Variable Name\"\r\n                                            value={variable.name}\r\n                                            disabled\r\n                                            className=\"opacity-70\"\r\n                                        />\r\n                                        <Select\r\n                                            label=\"Input Type\"\r\n                                            value={variable.type}\r\n                                            onChange={(e) =>\r\n                                                updateVariable(index, { type: e.target.value as Variable['type'] })\r\n                                            }\r\n                                            options={[\r\n                                                { value: 'text', label: 'Text' },\r\n                                                { value: 'textarea', label: 'Textarea' },\r\n                                                { value: 'select', label: 'Select' },\r\n                                            ]}\r\n                                        />\r\n                                    </div>\r\n                                    <Input\r\n                                        label=\"Default Value\"\r\n                                        value={variable.default || ''}\r\n                                        onChange={(e) => updateVariable(index, { default: e.target.value })}\r\n                                        placeholder=\"Optional default value\"\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Category, Tags & Keywords */}\r\n                <div className=\"grid grid-cols-1 gap-6 pt-2\">\r\n                    <Input\r\n                        label=\"Category\"\r\n                        value={formData.category}\r\n                        onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                        placeholder=\"e.g., Content, Design\"\r\n                    />\r\n                    <ChipInput\r\n                        label=\"Tags\"\r\n                        value={formData.tags || []}\r\n                        onChange={(tags) => setFormData({ ...formData, tags })}\r\n                        placeholder=\"Type a tag...\"\r\n                    />\r\n                    <ChipInput\r\n                        label=\"Keywords\"\r\n                        value={formData.keywords || []}\r\n                        onChange={(keywords) => setFormData({ ...formData, keywords })}\r\n                        placeholder=\"Type a keyword...\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Performance */}\r\n                <div className=\"border-t border-border pt-6 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div>\r\n                        <Input\r\n                            label=\"Version\"\r\n                            type=\"number\"\r\n                            value={formData.version}\r\n                            onChange={(e) => setFormData({ ...formData, version: parseInt(e.target.value) || 1 })}\r\n                            min={1}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <Input\r\n                            label=\"Rating (1-10)\"\r\n                            type=\"number\"\r\n                            value={formData.performance?.rating}\r\n                            onChange={(e) =>\r\n                                setFormData({\r\n                                    ...formData,\r\n                                    performance: { ...formData.performance!, rating: parseInt(e.target.value) || 0 },\r\n                                })\r\n                            }\r\n                            min={0}\r\n                            max={10}\r\n                        />\r\n                    </div>\r\n                    <div className=\"md:col-span-3\">\r\n                        <Textarea\r\n                            label=\"Performance Notes\"\r\n                            value={formData.performance?.notes}\r\n                            onChange={(e) =>\r\n                                setFormData({\r\n                                    ...formData,\r\n                                    performance: { ...formData.performance!, notes: e.target.value },\r\n                                })\r\n                            }\r\n                            placeholder=\"Notes about testing, performance, improvements...\"\r\n                            rows={3}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex items-center justify-end gap-3 pt-6 border-t border-border\">\r\n                    <Button variant=\"ghost\" onClick={() => router.back()}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleSave} isLoading={isSaving}>\r\n                        <Save className=\"w-4 h-4\" />\r\n                        Save Prompt\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import { useState, useRef, type KeyboardEvent } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport interface ChipInputProps {\r\n    label?: string;\r\n    value: string[];\r\n    onChange: (value: string[]) => void;\r\n    placeholder?: string;\r\n    suggestions?: string[];\r\n    error?: string;\r\n}\r\n\r\nexport function ChipInput({ label, value, onChange, placeholder = 'Add...', suggestions = [], error }: ChipInputProps) {\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const filteredSuggestions = suggestions\r\n        .filter((s) => !value.includes(s) && s.toLowerCase().includes(inputValue.toLowerCase()))\r\n        .slice(0, 7);\r\n\r\n    const addChip = (chip: string) => {\r\n        const trimmed = chip.trim();\r\n        if (trimmed && !value.includes(trimmed)) {\r\n            onChange([...value, trimmed]);\r\n        }\r\n        setInputValue('');\r\n        setShowSuggestions(false);\r\n    };\r\n\r\n    const removeChip = (index: number) => {\r\n        onChange(value.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter' || e.key === ',') {\r\n            e.preventDefault();\r\n            addChip(inputValue);\r\n        } else if (e.key === 'Backspace' && !inputValue && value.length > 0) {\r\n            removeChip(value.length - 1);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputValue(e.target.value);\r\n        setShowSuggestions(e.target.value.length > 0);\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        setTimeout(() => setShowSuggestions(false), 200);\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            {label && (\r\n                <label className=\"block text-sm font-medium text-foreground mb-1.5\">\r\n                    {label}\r\n                </label>\r\n            )}\r\n\r\n            <div\r\n                className={`\r\n                    min-h-[42px] px-3 py-1.5\r\n                    bg-transparent\r\n                    rounded-md\r\n                    border transition-colors\r\n                    flex flex-wrap gap-2 items-center\r\n                    ${error ? 'border-destructive focus-within:ring-1 focus-within:ring-destructive' : 'border-input focus-within:border-primary focus-within:ring-1 focus-within:ring-primary'}\r\n                `}\r\n                onClick={() => inputRef.current?.focus()}\r\n            >\r\n                {/* Chips */}\r\n                <AnimatePresence mode=\"popLayout\">\r\n                    {value.map((chip, index) => (\r\n                        <motion.span\r\n                            key={`${chip}-${index}`}\r\n                            layout\r\n                            initial={{ scale: 0.8, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.8, opacity: 0 }}\r\n                            transition={{ duration: 0.15 }}\r\n                            className=\"inline-flex items-center gap-1.5 px-2 py-0.5 bg-secondary rounded text-xs font-medium text-secondary-foreground\"\r\n                        >\r\n                            <span>{chip}</span>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    removeChip(index);\r\n                                }}\r\n                                className=\"hover:text-destructive transition-colors focus:outline-none\"\r\n                            >\r\n                                <X className=\"w-3 h-3\" />\r\n                            </button>\r\n                        </motion.span>\r\n                    ))}\r\n                </AnimatePresence>\r\n\r\n                {/* Input */}\r\n                <input\r\n                    ref={inputRef}\r\n                    type=\"text\"\r\n                    value={inputValue}\r\n                    onChange={handleInputChange}\r\n                    onKeyDown={handleKeyDown}\r\n                    onBlur={handleBlur}\r\n                    onFocus={() => inputValue && setShowSuggestions(true)}\r\n                    placeholder={value.length === 0 ? placeholder : ''}\r\n                    className=\"flex-1 min-w-[120px] bg-transparent border-none outline-none placeholder:text-muted-foreground text-sm text-foreground h-7 p-0\"\r\n                />\r\n            </div>\r\n\r\n            {/* Autocomplete Suggestions */}\r\n            {showSuggestions && filteredSuggestions.length > 0 && (\r\n                <div className=\"relative\">\r\n                    <div className=\"absolute z-10 w-full mt-1 bg-popover rounded-md border border-border shadow-md max-h-48 overflow-y-auto\">\r\n                        {filteredSuggestions.map((suggestion, index) => (\r\n                            <button\r\n                                key={index}\r\n                                type=\"button\"\r\n                                onClick={() => addChip(suggestion)}\r\n                                className=\"w-full px-3 py-2 text-left text-sm text-popover-foreground hover:bg-muted transition-colors\"\r\n                            >\r\n                                {suggestion}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {error && <p className=\"mt-1.5 text-xs text-destructive\">{error}</p>}\r\n        </div>\r\n    );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Search, X, Check, AlertCircle } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { Prompt } from '@/types';\r\nimport { CompositionService } from '@/lib/composition';\r\nimport { getPrompt } from '@/lib/storage';\r\n\r\ninterface ParentPromptSelectorProps {\r\n    currentPromptId: string | null;\r\n    selectedParentId: string | null;\r\n    workspaceId: string;\r\n    onSelect: (parentId: string | null) => void;\r\n}\r\n\r\nexport function ParentPromptSelector({\r\n    currentPromptId,\r\n    selectedParentId,\r\n    workspaceId,\r\n    onSelect\r\n}: ParentPromptSelectorProps) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [candidates, setCandidates] = useState<Prompt[]>([]);\r\n    const [selectedParent, setSelectedParent] = useState<Prompt | null>(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Load initial selected parent\r\n    useEffect(() => {\r\n        if (selectedParentId) {\r\n            getPrompt(selectedParentId).then(p => {\r\n                if (p) setSelectedParent(p);\r\n            });\r\n        } else {\r\n            setSelectedParent(null);\r\n        }\r\n    }, [selectedParentId]);\r\n\r\n    // Load candidates when opening\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            loadCandidates();\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const loadCandidates = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const all = await CompositionService.getEligibleParents(currentPromptId, workspaceId);\r\n            setCandidates(all);\r\n        } catch (err) {\r\n            console.error('Failed to load parent candidates', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSelect = async (prompt: Prompt) => {\r\n        setError(null);\r\n\r\n        // Double check cycle detection (redundant but safe)\r\n        if (currentPromptId && await CompositionService.detectCircularReference(currentPromptId, prompt.id)) {\r\n            setError('Cannot select this parent: would create a circular reference');\r\n            return;\r\n        }\r\n\r\n        // Check depth\r\n        const depth = await CompositionService.getPromptDepth(prompt.id);\r\n        if (depth >= 10) {\r\n            setError('Cannot select this parent: depth limit exceeded (max 10)');\r\n            return;\r\n        }\r\n\r\n        onSelect(prompt.id);\r\n        setSelectedParent(prompt);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const handleClear = (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        onSelect(null);\r\n        setSelectedParent(null);\r\n    };\r\n\r\n    const filteredCandidates = candidates.filter(p =>\r\n        p.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        p.tags.some(t => t.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                    Parent Prompt <span className=\"text-muted-foreground font-normal text-xs\">(Optional)</span>\r\n                </label>\r\n                {selectedParent && (\r\n                    <span className=\"text-[10px] bg-primary/10 text-primary px-1.5 py-0.5 rounded border border-primary/20\">\r\n                        Inherits content\r\n                    </span>\r\n                )}\r\n            </div>\r\n\r\n            {/* Selector Trigger */}\r\n            <div\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className={`\r\n                    w-full min-h-[40px] px-3 py-2 rounded-md border flex items-center justify-between cursor-pointer transition-colors\r\n                    ${isOpen\r\n                        ? 'border-primary ring-1 ring-primary bg-background'\r\n                        : 'bg-background border-input hover:border-primary/50'\r\n                    }\r\n                `}\r\n            >\r\n                {selectedParent ? (\r\n                    <div className=\"flex items-center gap-2 overflow-hidden\">\r\n                        <span className={`w-2 h-2 rounded-full bg-${getPromptColor(selectedParent.type)} shrink-0`} />\r\n                        <span className=\"text-sm text-foreground truncate\">{selectedParent.title}</span>\r\n                    </div>\r\n                ) : (\r\n                    <span className=\"text-sm text-muted-foreground\">Search to select a parent prompt...</span>\r\n                )}\r\n\r\n                <div className=\"flex items-center gap-1 ml-2\">\r\n                    {selectedParent && (\r\n                        <button\r\n                            onClick={handleClear}\r\n                            className=\"p-1 hover:bg-muted rounded-full text-muted-foreground hover:text-foreground transition-colors\"\r\n                        >\r\n                            <X size={14} />\r\n                        </button>\r\n                    )}\r\n                    <span className=\"text-muted-foreground/50 text-[10px]\">‚ñº</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Dropdown & Overlay */}\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <>\r\n                        {/* Transparent Overlay to close */}\r\n                        <div\r\n                            className=\"fixed inset-0 z-40 bg-transparent\"\r\n                            onClick={() => setIsOpen(false)}\r\n                        />\r\n\r\n                        {/* Dropdown Content */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 4, scale: 0.98 }}\r\n                            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                            exit={{ opacity: 0, y: 4, scale: 0.98 }}\r\n                            transition={{ duration: 0.1 }}\r\n                            className=\"absolute z-50 top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg overflow-hidden flex flex-col max-h-[300px]\"\r\n                        >\r\n                            {/* Search Input */}\r\n                            <div className=\"p-2 border-b border-border sticky top-0 bg-popover z-10\">\r\n                                <div className=\"relative\">\r\n                                    <Search size={14} className=\"absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        autoFocus\r\n                                        value={searchQuery}\r\n                                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                                        placeholder=\"Type to search...\"\r\n                                        className=\"w-full bg-muted/50 border-none rounded-sm pl-8 pr-3 py-1.5 text-sm text-foreground focus:ring-1 focus:ring-primary outline-none h-8\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Error Message */}\r\n                            {error && (\r\n                                <div className=\"mx-2 mt-2 p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive flex items-center gap-2\">\r\n                                    <AlertCircle size={12} />\r\n                                    {error}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Candidates List */}\r\n                            <div className=\"overflow-y-auto flex-1 p-1 custom-scrollbar\">\r\n                                {isLoading ? (\r\n                                    <div className=\"p-4 text-center text-xs text-muted-foreground animate-pulse\">Loading...</div>\r\n                                ) : filteredCandidates.length === 0 ? (\r\n                                    <div className=\"p-8 text-center\">\r\n                                        <p className=\"text-sm text-foreground font-medium\">No prompts found</p>\r\n                                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                            {searchQuery ? `No results for \"${searchQuery}\"` : \"This workspace has no other prompts yet.\"}\r\n                                        </p>\r\n                                    </div>\r\n                                ) : (\r\n                                    filteredCandidates.map(prompt => (\r\n                                        <button\r\n                                            key={prompt.id}\r\n                                            onClick={() => handleSelect(prompt)}\r\n                                            className={`\r\n                                                w-full text-left px-3 py-2 rounded-sm flex items-center justify-between group transition-colors\r\n                                                ${prompt.id === selectedParentId ? 'bg-primary/10' : 'hover:bg-muted'}\r\n                                            `}\r\n                                        >\r\n                                            <div className=\"min-w-0\">\r\n                                                <div className=\"text-sm text-foreground font-medium truncate\">\r\n                                                    {prompt.title}\r\n                                                </div>\r\n                                                <div className=\"text-[10px] text-muted-foreground flex items-center gap-2 mt-0.5\">\r\n                                                    <span className={`w-1.5 h-1.5 rounded-full bg-${getPromptColor(prompt.type)}`} />\r\n                                                    {prompt.type}\r\n                                                </div>\r\n                                            </div>\r\n                                            {prompt.id === selectedParentId && <Check size={14} className=\"text-primary ml-2 shrink-0\" />}\r\n                                        </button>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Helper for type colors\r\nfunction getPromptColor(type: string): string {\r\n    switch (type) {\r\n        case 'LLM': return 'cyan-400';\r\n        case 'Image': return 'violet-400';\r\n        case 'Video': return 'amber-400';\r\n        case 'Automation': return 'green-400';\r\n        default: return 'gray-400';\r\n    }\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n"],"names":[],"mappings":"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","ignoreList":[3]}